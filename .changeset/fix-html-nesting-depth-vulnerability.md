---
"@ts-graphviz/ast": patch
---

Fix critical stack overflow vulnerability in HTML string parser

This patch addresses a critical security vulnerability where deeply nested HTML-like structures in DOT files could cause stack overflow, leading to application crashes and potential DoS attacks.

**Changes:**
- Added depth limit (default: 100) to HTML string parsing in PEG grammar
- Introduced `maxHtmlNestingDepth` option to `parse()` function for custom depth limits
- Improved parser to track and limit HTML nesting depth during parsing

**Security Impact:**
- Prevents stack overflow attacks from maliciously crafted DOT files with deep HTML nesting
- Normal use cases (typically <10 levels) are unaffected
- Configurable limit allows complex parsing when needed

**Breaking Changes:**
None. This is a backward-compatible security fix with sensible defaults.
